(this["webpackJsonpfrontend-crypto-currency"]=this["webpackJsonpfrontend-crypto-currency"]||[]).push([[0],{1038:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(108),r=a.n(i),c=a(20),l=a(76),o=a(25),d=a(12),u=a.n(d),h=(a(31),a(189)),j=a(30),b=a(13),O=a(11),x=a(17),m=a(18),v=a(305),f=a(383),p=a(45),g=a(111),y=a(116),C=a(1090),S=a(1040),D=a(1094),P=a(1099),R=a(394),A=a(1091),k=a(131),F=a(1102),L=a(1101),I=a(1089),w=a(2),M=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={exampleData:"",fileDownloadUrl:"",fileName:""},n.downloadData=n.downloadData.bind(Object(k.a)(n)),n}return Object(O.a)(a,[{key:"fetchData",value:function(){var e=this;this.setState({exampleData:"Please wait it's being loaded ..."});var t="".concat(this.props.currency),a="".concat(this.props.collectionType);this.props.user.functions.GetExampleDocument(t,a).then((function(t){e.setState({exampleData:JSON.stringify(t,null,4)})}))}},{key:"downloadData",value:function(){var e=this,t=this.state.exampleData,a=new Blob([t]),n=URL.createObjectURL(a),s=this.props.currency+"_example.json";this.setState({fileDownloadUrl:n,fileName:s},(function(){e.dofileDownload.click(),URL.revokeObjectURL(n),e.setState({fileDownloadUrl:""})}))}},{key:"render",value:function(){var e=this;return Object(w.jsxs)(F.a,{open:this.props.modalOpen,closeOnEscape:!0,closeOnRootNodeClick:!0,onClose:this.props.handleClose,onMount:function(){return e.fetchData()},children:[Object(w.jsx)(F.a.Header,{children:"Example Data"}),Object(w.jsx)(F.a.Content,{image:!0,scrolling:!0,children:Object(w.jsx)(F.a.Description,{children:Object(w.jsx)(L.a,{showLineNumbers:!0,language:"json",style:I.a,children:this.state.exampleData})})}),Object(w.jsxs)(F.a.Actions,{children:[Object(w.jsxs)(g.a,{onClick:function(){return e.downloadData()},primary:!0,children:["Download Example Set ",Object(w.jsx)(p.a,{name:"download"})]}),Object(w.jsx)("a",{className:"hidden",download:this.state.fileName,href:this.state.fileDownloadUrl,ref:function(t){return e.dofileDownload=t},children:" "}),Object(w.jsxs)(g.a,{onClick:function(){return e.props.handleClose()},primary:!0,children:["Close ",Object(w.jsx)(p.a,{name:"window close"})]})]})]})}}]),a}(s.a.Component),T=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={currencies:[{key:1,text:"Loading from database ...",value:"N/A"}],isModalOpen:!1,currency:"",collectionType:"timeseries"},n}return Object(O.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=[];console.log("Function called for currencies"),this.props.user.functions.GetSymbols(null).then((function(a){a.map((function(e){return t.push({text:e._id,value:e._id})})),console.log("Number of currencies retrieved from database: ".concat(t.length)),e.setState({currencies:t,currency:t[0].value}),e.propagateChoiceIfNotInTheContext(t[0].value,e.props.symbolHandler)}))}},{key:"propagateChoiceIfNotInTheContext",value:function(e,t){t(e)}},{key:"render",value:function(){var e=this;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(C.a.Field,{required:!0,children:Object(w.jsxs)(C.a.Group,{children:[Object(w.jsx)(C.a.Dropdown,{required:!0,width:8,label:"Currency",placeholder:"Loading from Database...",search:!0,selection:!0,options:this.state.currencies,value:this.state.currency,onChange:function(t,a){e.setState({currency:a.value}),e.propagateChoiceIfNotInTheContext(a.value,e.props.symbolHandler)}}),Object(w.jsx)(P.a,{hideOnScroll:!0,flowing:!0,hoverable:!0,trigger:Object(w.jsxs)(C.a.Button,{fluid:!0,icon:!0,labelPosition:"left",color:"green",size:"small",label:"\xa0",children:[Object(w.jsx)(p.a,{name:"search"}),"Show Example Data"]}),children:Object(w.jsxs)(R.a,{relaxed:!0,columns:2,centered:!0,divided:!0,children:[Object(w.jsxs)(R.a.Column,{textAlign:"center",width:6,children:[Object(w.jsx)(A.a,{as:"h4",children:"Time-Series Collection"}),Object(w.jsx)("p",{children:"From the collection where the application interacts"}),Object(w.jsxs)(g.a,{icon:!0,labelPosition:"right",color:"green",onClick:function(){return e.setState({isModalOpen:!0,collectionType:"timeseries"})},children:[Object(w.jsx)(p.a,{name:"chart line"}),"Show Data"]})]}),Object(w.jsxs)(R.a.Column,{textAlign:"center",width:6,children:[Object(w.jsx)(A.a,{as:"h4",children:"System Bucketed Collection"}),Object(w.jsx)("p",{children:"From the collection where the data is actually stored"}),Object(w.jsxs)(g.a,{icon:!0,labelPosition:"right",color:"green",onClick:function(){return e.setState({isModalOpen:!0,collectionType:"bucketed"})},children:[Object(w.jsx)(p.a,{name:"list"}),"Show Data"]})]})]})})]})}),Object(w.jsx)(M,{user:this.props.user,modalOpen:this.state.isModalOpen,handleClose:function(){e.setState({isModalOpen:!1})},currency:this.state.currency,collectionType:this.state.collectionType})]})}}]),a}(s.a.Component),H=a(159),N=[{key:1,text:"1 Min",value:1},{key:2,text:"3 Min",value:3},{key:3,text:"5 Min",value:5},{key:4,text:"10 Min",value:10},{key:5,text:"15 Min",value:15},{key:6,text:"30 Min",value:30},{key:7,text:"1 Hour",value:60},{key:8,text:"4 Hour",value:240},{key:9,text:"8 Hour",value:480},{key:10,text:"24 Hour",value:1440}],q=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={value:1},n}return Object(O.a)(a,[{key:"handleChange",value:function(e,t){this.setState({value:t.value}),this.props.sendController(t.value)}},{key:"render",value:function(){var e=this;return Object(w.jsxs)(C.a.Field,{required:!0,children:[Object(w.jsx)("label",{children:"Interval"}),Object(w.jsx)(H.a,{selection:!0,options:N,name:"dropdown_interval_value",onChange:function(t,a){return e.handleChange(t,a)},value:this.state.value})]})}}]),a}(s.a.Component),E=[{key:1,text:"Last Hour",value:1},{key:2,text:"Last 3 Hours",value:3},{key:3,text:"Last 12 Hours",value:12},{key:4,text:"Last 24 Hours",value:24},{key:5,text:"Last 3 Days",value:72},{key:6,text:"Last 7 Days",value:168},{key:7,text:"Last 15 Days",value:360},{key:8,text:"Last 30 Days",value:720}],_=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={value:1},n}return Object(O.a)(a,[{key:"handleChange",value:function(e,t){this.setState({value:t.value}),this.props.sendController(t.value)}},{key:"render",value:function(){var e=this;return Object(w.jsx)(C.a.Field,{required:!0,children:Object(w.jsxs)(C.a.Group,{children:[Object(w.jsx)(C.a.Dropdown,{selection:!0,required:!0,width:8,label:"Date Filter",options:E,name:"dropdown_date_filter_value",onChange:function(t,a){return e.handleChange(t,a)},value:this.state.value}),Object(w.jsxs)(P.a,{hideOnScroll:!0,flowing:!0,hoverable:!0,trigger:Object(w.jsxs)(C.a.Button,{fluid:!0,icon:!0,labelPosition:"left",color:"green",size:"small",label:"\xa0",children:[Object(w.jsx)(p.a,{name:"info circle"}),"Data Source Info"]}),children:[Object(w.jsxs)("p",{children:[Object(w.jsx)("b",{children:"Last hour:"})," Run the analysis in only the last hour of data"]}),Object(w.jsxs)("p",{children:[Object(w.jsx)("b",{children:"Last 3 Hours:"})," Run the analysis in only the last 3 hours of data"]}),Object(w.jsxs)("p",{children:[Object(w.jsx)("b",{children:"Last 12 Hours:"})," Run the analysis in only the last 12 hours of data"]}),Object(w.jsxs)("p",{children:[Object(w.jsx)("b",{children:"Last 24 Hours:"})," Run the analysis in only the last 24 hours of data"]}),Object(w.jsxs)("p",{children:[Object(w.jsx)("b",{children:"Last 3 Days:"})," Run the analysis in only the last 72 hours of data"]}),Object(w.jsxs)("p",{children:[Object(w.jsx)("b",{children:"Last 7 Days:"})," Run the analysis in only the last 168 hours of data"]}),Object(w.jsxs)("p",{children:[Object(w.jsx)("b",{children:"Last 15 Days:"})," Run the analysis in only the last 360 hours of data"]}),Object(w.jsxs)("p",{children:[Object(w.jsx)("b",{children:"Last 30 Days:"})," Run the analysis in only the last 720 hours of data"]})]})]})})}}]),a}(s.a.Component),U=a(1092),G=s.a.createContext(),Q=a(54),V=a.n(Q),z=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){var e=this;return Object(w.jsxs)(U.a,{celled:!0,striped:!0,children:[Object(w.jsx)(U.a.Header,{children:Object(w.jsxs)(U.a.Row,{children:[Object(w.jsx)(U.a.HeaderCell,{children:"Time"}),Object(w.jsx)(U.a.HeaderCell,{children:"Currency"}),Object(w.jsx)(U.a.HeaderCell,{children:"Close Price"}),Object(w.jsx)(U.a.HeaderCell,{children:"Open Price"}),Object(w.jsx)(U.a.HeaderCell,{children:"High Price"}),Object(w.jsx)(U.a.HeaderCell,{children:"Low Price"}),this.context.enabledFilters.movingAverage[0]?Object(w.jsxs)(U.a.HeaderCell,{children:["MA (",this.context.movingAverageFilters[0],")"]}):null,this.context.enabledFilters.movingAverage[1]?Object(w.jsxs)(U.a.HeaderCell,{children:["MA (",this.context.movingAverageFilters[1],")"]}):null,this.context.enabledFilters.movingAverage[2]?Object(w.jsxs)(U.a.HeaderCell,{children:["EMA (",this.context.movingAverageFilters[2],")"]}):null,this.context.enabledFilters.movingAverage[3]?Object(w.jsxs)(U.a.HeaderCell,{children:["EMA (",this.context.movingAverageFilters[3],")"]}):null,this.context.enabledFilters.macd?Object(w.jsxs)(n.Fragment,{children:[Object(w.jsxs)(U.a.HeaderCell,{children:["MACD LINE (",this.context.numOfPrevDataPointsMacdLine1,",",this.context.numOfPrevDataPointsMacdLine2,")"]}),Object(w.jsxs)(U.a.HeaderCell,{children:["MACD SIGNAL LINE(",this.context.numOfPrevDataPointsMacdSignal,")"]}),Object(w.jsx)(U.a.HeaderCell,{children:"MACD HISTOGRAM"})]}):null,this.context.enabledFilters.rsi?Object(w.jsxs)(n.Fragment,{children:[Object(w.jsx)(U.a.HeaderCell,{children:"Gain"}),Object(w.jsx)(U.a.HeaderCell,{children:"Loss"}),Object(w.jsx)(U.a.HeaderCell,{children:"Avg Gain"}),Object(w.jsx)(U.a.HeaderCell,{children:"Avg Loss"}),Object(w.jsx)(U.a.HeaderCell,{children:"RSI"})]}):null]})}),Object(w.jsx)(U.a.Body,{children:void 0!==this.context.currencyHistoryDataForTable?this.context.currencyHistoryDataForTable.map((function(t,a){return Object(w.jsxs)(U.a.Row,{children:[Object(w.jsx)(U.a.Cell,{children:V()(t._id.time).local().format()}),Object(w.jsx)(U.a.Cell,{children:t._id.symbol}),Object(w.jsx)(U.a.Cell,{children:t.close}),Object(w.jsx)(U.a.Cell,{children:t.open}),Object(w.jsx)(U.a.Cell,{children:t.high}),Object(w.jsx)(U.a.Cell,{children:t.low}),e.context.enabledFilters.movingAverage[0]?Object(w.jsx)(U.a.Cell,{children:t.movingAverage01}):null,e.context.enabledFilters.movingAverage[1]?Object(w.jsx)(U.a.Cell,{children:t.movingAverage02}):null,e.context.enabledFilters.movingAverage[2]?Object(w.jsx)(U.a.Cell,{children:t.expMovingAverage01}):null,e.context.enabledFilters.movingAverage[3]?Object(w.jsx)(U.a.Cell,{children:t.expMovingAverage02}):null,e.context.enabledFilters.macd?Object(w.jsxs)(n.Fragment,{children:[Object(w.jsx)(U.a.Cell,{children:t.macdLine}),Object(w.jsx)(U.a.Cell,{children:t.macdSignal}),Object(w.jsx)(U.a.Cell,{children:t.macdHistogram})]}):null,e.context.enabledFilters.rsi>0?Object(w.jsxs)(n.Fragment,{children:[Object(w.jsx)(U.a.Cell,{children:t.gain}),Object(w.jsx)(U.a.Cell,{children:t.loss}),Object(w.jsx)(U.a.Cell,{children:t.avgGain}),Object(w.jsx)(U.a.Cell,{children:t.avgLoss}),Object(w.jsx)(U.a.Cell,{children:t.rsi})]}):null]},a)})):null})]})}}]),a}(s.a.Component);z.contextType=G;var B=z,$=a(92),K=a.n($),J=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={options:{colors:[function(e){var t=e.value,a=e.seriesIndex;e.w;return 0===a?"#0000FF":1===a?"#FF0000":2===a?t>0?"#00FF00":"#FF0000":void 0}],chart:{id:"macd-histogram",type:"line",animations:{enabled:!1}},xaxis:{type:"category",label:{datetimeUTC:!1},crosshairs:{show:!0},floating:!1,tooltip:{enabled:!0}},yaxis:{labels:{minWidth:1,formatter:function(e){return e}},forceNiceScale:!0,tooltip:{enabled:!0},seriesName:"histogram",crosshairs:{show:!0,position:"front",dropShadow:{enabled:!0}},floating:!1},title:{text:"Macd Histogram",align:"left"},stroke:{curve:"smooth",width:3},legend:{show:!0,labels:{useSeriesColors:!0}}},series:[{name:"MACD Line",type:"line",data:n.props.macdLineData},{name:"MACD Signal",type:"line",data:n.props.macdSignalData},{name:"Histogram",type:"column",data:n.props.macdHistogramData}]},n}return Object(O.a)(a,[{key:"render",value:function(){return Object(w.jsx)(K.a,{options:this.state.options,type:"line",series:this.state.series,width:"100%",height:"400"})}}]),a}(s.a.Component),W=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={options:{chart:{id:"rsi-line",type:"chart",animations:{enabled:!1}},xaxis:{type:"category",label:{datetimeUTC:!1},crosshairs:{show:!0},floating:!1,tooltip:{enabled:!0}},yaxis:{labels:{minWidth:1,formatter:function(e){return e}},forceNiceScale:!0,tooltip:{enabled:!0},seriesName:"rsi-data",crosshairs:{show:!0,position:"front",dropShadow:{enabled:!0}},floating:!1},title:{text:"RSI",align:"left"},stroke:{curve:"smooth",width:3},legend:{show:!0,labels:{useSeriesColors:!0}}},series:[{name:"rsi-data",type:"line",data:n.props.rsiData},{name:"rsi-data-upper-threshold",type:"line",data:n.props.rsiData.map((function(e){return{x:e.x,y:70}}))},{name:"rsi-data-lower-threshold",type:"line",data:n.props.rsiData.map((function(e){return{x:e.x,y:30}}))}]},n}return Object(O.a)(a,[{key:"render",value:function(){return Object(w.jsx)(K.a,{options:this.state.options,type:"line",series:this.state.series,width:"100%",height:"400"})}}]),a}(s.a.Component),Y=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={options:{colors:["#f98815","#158bf9","#15f9f3","#ee240e"],chart:{id:"candle-stick",height:600,type:"candlestick",animations:{enabled:!1}},tooltip:{enabled:!0},xaxis:{type:"category",tooltip:{enabled:!0}},yaxis:{tooltip:{enabled:!0},labels:{minWidth:1,formatter:function(e){return e}},seriesName:"candlestick"},title:{text:"CandleStick Chart",align:"left"},stroke:{curve:"smooth",width:3,colors:["#f98815","#158bf9","#15f9f3","#ee240e"]},legend:{show:!0,labels:{useSeriesColors:!0}}},series:[{name:"Candle Stick",type:"candlestick",data:n.props.candleStickData},{name:"MA - 1",type:"line",data:n.props.movingAverage01Data},{name:"MA - 2",type:"line",data:n.props.movingAverage02Data},{name:"EMA -  1",type:"line",data:n.props.expMovingAverage01Data},{name:"EMA - 2",type:"line",data:n.props.expMovingAverage02Data}]},n}return Object(O.a)(a,[{key:"render",value:function(){return Object(w.jsx)(K.a,{options:this.state.options,type:"candlestick",series:this.state.series,width:"100%",height:"600"})}}]),a}(s.a.Component),X=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={options:{chart:{id:"stochastic-oscillator-line",type:"chart",animations:{enabled:!1}},xaxis:{type:"category",label:{datetimeUTC:!1},crosshairs:{show:!0},floating:!1,tooltip:{enabled:!0}},yaxis:{labels:{minWidth:1,formatter:function(e){return e}},forceNiceScale:!0,tooltip:{enabled:!0},seriesName:"stochastic-oscillator-data",crosshairs:{show:!0,position:"front",dropShadow:{enabled:!0}},floating:!1},title:{text:"Stochastic Oscillator",align:"left"},stroke:{curve:"smooth",width:3},legend:{show:!0,labels:{useSeriesColors:!0}}},series:[{name:"stochastic-oscillator-data-kvalue",type:"line",data:n.props.stochasticOscillatorDataKValue},{name:"stochastic-oscillator-data-dvalue",type:"line",data:n.props.stochasticOscillatorDataDValue},{name:"stochastic-oscillator-data-upper-threshold",type:"line",data:n.props.stochasticOscillatorDataKValue.map((function(e){return{x:e.x,y:80}}))},{name:"stochastic-oscillator-data-lower-threshold",type:"line",data:n.props.stochasticOscillatorDataKValue.map((function(e){return{x:e.x,y:20}}))}]},n}return Object(O.a)(a,[{key:"render",value:function(){return Object(w.jsx)(K.a,{options:this.state.options,type:"line",series:this.state.series,width:"100%",height:"400"})}}]),a}(s.a.Component),Z=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={},n}return Object(O.a)(a,[{key:"render",value:function(){return Object(w.jsx)("div",{className:"app",children:Object(w.jsx)("div",{className:"row",children:Object(w.jsxs)("div",{className:"mixed-chart",children:[Object(w.jsx)(Y,{candleStickData:this.context.chartData.candleStick,movingAverage01Data:this.context.chartData.movingAverage01,movingAverage02Data:this.context.chartData.movingAverage02,expMovingAverage01Data:this.context.chartData.expMovingAverage01,expMovingAverage02Data:this.context.chartData.expMovingAverage02}),this.context.enabledFilters.rsi?Object(w.jsx)(W,{rsiData:this.context.chartData.rsi}):null,this.context.enabledFilters.macd?Object(w.jsx)(J,{macdLineData:this.context.chartData.macdLine,macdSignalData:this.context.chartData.macdSignal,macdHistogramData:this.context.chartData.macdHistogram}):null,this.context.enabledFilters.stochasticOscillator?Object(w.jsx)(X,{stochasticOscillatorDataKValue:this.context.chartData.stocOsscK,stochasticOscillatorDataDValue:this.context.chartData.stocOsscD}):null]})})})}}]),a}(s.a.Component);Z.contextType=G;var ee=Z,te=a(311),ae=a(1093),ne=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).handleClick=function(e,t){var a=t.index,s=n.state.activeIndex===a?-1:a;n.setState({activeIndex:s})},n.state={activeIndex:0},n}return Object(O.a)(a,[{key:"render",value:function(){var e=this.state.activeIndex;return Object(w.jsxs)(f.a,{children:[Object(w.jsxs)(f.a.Title,{active:0===e,index:0,onClick:this.handleClick,children:[Object(w.jsx)(p.a,{name:"dropdown"}),"Generated Aggregation Query"]}),Object(w.jsx)(f.a.Content,{active:0===e,children:Object(w.jsx)(te.a,{showLineNumbers:!0,language:"json",style:ae.a,children:this.props.query})})]})}}]),a}(s.a.Component),se=a(312),ie=a(1043),re=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){var e=this;return Object(w.jsxs)(C.a.Group,{inline:!0,children:[Object(w.jsx)(C.a.Field,{children:Object(w.jsx)(se.a,{label:this.props.name,checked:this.context.enabledFilters.movingAverage[this.props.number],onClick:function(){return e.context.toggleMovingAverage(e.props.number)}})}),Object(w.jsx)(C.a.Field,{children:Object(w.jsx)(ie.a,{value:this.context.movingAverageFilters[this.props.number],disabled:!this.context.enabledFilters.movingAverage[this.props.number],type:"number",label:"# of previous data points:",onChange:function(t){return e.context.setMovingAverageFilter(e.props.number,t.currentTarget.value)}})})]})}}]),a}(s.a.Component);re.contextType=G;var ce=re,le=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){var e=this;return Object(w.jsxs)(C.a.Group,{inline:!0,children:[Object(w.jsx)(C.a.Field,{children:Object(w.jsx)(se.a,{label:this.props.name,checked:this.context.enabledFilters.macd,onClick:function(){return e.context.toggleMacd()}})}),Object(w.jsxs)(C.a.Field,{children:[Object(w.jsx)(ie.a,{value:this.context.numOfPrevDataPointsMacdLine1,disabled:!this.context.enabledFilters.macd,type:"number",label:"# of previous data points for first param of MACD Line:",onChange:function(t){return e.context.setNumOfPrevDataPointsMacdLine1(t.currentTarget.value)}}),Object(w.jsx)(ie.a,{value:this.context.numOfPrevDataPointsMacdLine2,disabled:!this.context.enabledFilters.macd,type:"number",label:"# of previous data points for second param of MACD Line:",onChange:function(t){return e.context.setNumOfPrevDataPointsMacdLine2(t.currentTarget.value)}}),Object(w.jsx)(ie.a,{value:this.context.numOfPrevDataPointsMacdSignal,disabled:!this.context.enabledFilters.macd,type:"number",label:"# of previous data points MACD Signal Line:",onChange:function(t){return e.context.setNumOfPrevDataPointsMacdSignal(t.currentTarget.value)}})]})]})}}]),a}(s.a.Component);le.contextType=G;var oe=le,de=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){var e=this;return Object(w.jsxs)(C.a.Group,{inline:!0,children:[Object(w.jsx)(C.a.Field,{children:Object(w.jsx)(se.a,{label:this.props.name,checked:this.context.enabledFilters.rsi,onClick:function(){return e.context.toggleRSI()}})}),Object(w.jsx)(C.a.Field,{children:Object(w.jsx)(ie.a,{value:this.context.numOfPrevDataPointsRSI,disabled:!this.context.enabledFilters.rsi,type:"number",label:"# of previous data points:",onChange:function(t){return e.context.setNumOfPrevDataPointsRSI(t.currentTarget.value)}})})]})}}]),a}(s.a.Component);de.contextType=G;var ue=de,he=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){var e=this;return Object(w.jsxs)(C.a.Group,{inline:!0,children:[Object(w.jsx)(C.a.Field,{children:Object(w.jsx)(se.a,{label:this.props.name,checked:this.context.enabledFilters.stochasticOscillator,onClick:function(){return e.context.toggleStochasticOscillator()}})}),Object(w.jsx)(C.a.Field,{children:Object(w.jsx)(ie.a,{value:this.context.numOfPrevDataPointsStochasticOscillator,disabled:!this.context.enabledFilters.stochasticOscillator,type:"number",label:"# of previous data points:",onChange:function(t){return e.context.setNumOfPrevDataPointsnumOfPrevDataPointsStochasticOscillator(t.currentTarget.value)}})})]})}}]),a}(s.a.Component);he.contextType=G;var je=he,be=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).defaultQuery="// It will be updated just after the query is executed \ndb.{collectionName}.aggregate([...])",n.state={currencyHistoryDataForTable:void 0,renderTable:!1,renderChart:!1,queryIsRunning:!1,query:n.defaultQuery,currency:"",interval:1,hourFilter:72,isStatisticsAccordionOpen:!1,enabledFilters:{movingAverage:[!1,!1,!1,!1],macd:!1,rsi:!1,stochasticOscillator:!1},latestInformation:{isQueryRunning:!0,latestCurrencyDateLocalStr:"Loading ...",firstCurrencyDateLocalStr:"Loading ..."},movingAverageFilters:[1,1,1,1],numOfPrevDataPointsMacdLine1:12,numOfPrevDataPointsMacdLine2:26,numOfPrevDataPointsMacdSignal:9,numOfPrevDataPointsRSI:14,numOfPrevDataPointsStochasticOscillator:14,htmlTableData:{currencyData:void 0},chartData:{candleStick:[],movingAverage01:[],movingAverage02:[],expMovingAverage01:[],expMovingAverage02:[],macdLine:[],macdSignal:[],macdHistogram:[],rsi:[],stocOsscK:[],stocOsscD:[]}},n}return Object(O.a)(a,[{key:"fetchLatestInfo",value:function(){var e=this;this.setState({latestInformation:{isQueryRunning:!0}}),this.props.user.functions.GetLatestTSCollectionStatistics().then((function(t){var a=t;a.latestCurrencyDateLocalStr=V()(a.latestCurrencyDate).local().format(),a.firstCurrencyDateLocalStr=V()(a.firstCurrencyDate).local().format(),e.setState({latestInformation:{isQueryRunning:!1,latestCurrencyDateLocalStr:V()(a.latestCurrencyDate).local().format(),firstCurrencyDateLocalStr:V()(a.firstCurrencyDate).local().format(),totalNumberOfRecords:a.totalNumberOfRecords,totalNumberOfBuckets:a.totalNumberOfBuckets}})}))}},{key:"UNSAFE_componentWillMount",value:function(){this.fetchLatestInfo()}},{key:"fetchAndRender",value:function(e){var t=this;this.setState({queryIsRunning:!0});var a={symbol:this.state.currency,hourFilter:this.state.hourFilter,candleStickUnit:"minute",candleStickInterval:this.state.interval,ma1:this.state.enabledFilters.movingAverage[0]?parseInt(this.state.movingAverageFilters[0]):null,ma2:this.state.enabledFilters.movingAverage[1]?parseInt(this.state.movingAverageFilters[1]):null,ema1:this.state.enabledFilters.movingAverage[2]?parseInt(this.state.movingAverageFilters[2]):null,ema2:this.state.enabledFilters.movingAverage[3]?parseInt(this.state.movingAverageFilters[3]):null,macd1:this.state.enabledFilters.macd?parseInt(this.state.numOfPrevDataPointsMacdLine1):null,macd2:this.state.enabledFilters.macd?parseInt(this.state.numOfPrevDataPointsMacdLine2):null,macdSignal:this.state.enabledFilters.macd?parseInt(this.state.numOfPrevDataPointsMacdSignal):null,rsi:this.state.enabledFilters.rsi?parseInt(this.state.numOfPrevDataPointsRSI):null,stocOsc:this.state.enabledFilters.stochasticOscillator?parseInt(this.state.numOfPrevDataPointsStochasticOscillator):null};this.props.user.functions.GetTickerReport(a).then((function(a){var n=a.result,s=JSON.stringify(a.query,null,4);if("TABLE"===e){var i=n.map((function(e){return e}));t.setState({query:s,currencyHistoryDataForTable:i}),t.setState({queryIsRunning:!1}),t.renderTable()}else if("CHART"===e){var r=n.slice(Math.max(n.length-100,0)),c=(r=r.map((function(e){return e.localTimeStr=V.a.utc(e._id.time).local().format(),e}))).map((function(e){return{x:e.localTimeStr,y:[e.open,e.high,e.low,e.close]}})),l=r.map((function(e){return{x:e.localTimeStr,y:e.movingAverage01}})),o=r.map((function(e){return{x:e.localTimeStr,y:e.movingAverage02}})),d=r.map((function(e){return{x:e.localTimeStr,y:e.expMovingAverage01}})),u=r.map((function(e){return{x:e.localTimeStr,y:e.expMovingAverage02}})),h=null,j=null,b=null;0!==t.state.numOfPrevDataPointsMacdLine1&&(h=r.map((function(e){return{x:e.localTimeStr,y:e.macdLine}})),j=r.map((function(e){return{x:e.localTimeStr,y:e.macdSignal}})),b=r.map((function(e){return{x:e.localTimeStr,y:e.macdHistogram}})));var O=null;0!==t.state.numOfPrevDataPointsRSI&&(O=r.map((function(e){return{x:e.localTimeStr,y:e.rsi}})));var x=null,m=null;0!==t.state.numOfPrevDataPointsStochasticOscillator&&(x=r.map((function(e){return{x:e.localTimeStr,y:e.stocOsscKValue}})),m=r.map((function(e){return{x:e.localTimeStr,y:e.stocOsscDValue}}))),t.setState({query:s,chartData:{candleStick:c,movingAverage01:l,movingAverage02:o,expMovingAverage01:d,expMovingAverage02:u,macdLine:h,macdSignal:j,macdHistogram:b,rsi:O,stocOsscK:x,stocOsscD:m}}),t.setState({queryIsRunning:!1}),t.renderChart()}}))}},{key:"renderTable",value:function(){this.setState({renderTable:!1}),this.setState({renderChart:!1}),this.setState({renderTable:!0})}},{key:"renderChart",value:function(){this.setState({renderChart:!1}),this.setState({renderTable:!1}),this.setState({renderChart:!0})}},{key:"handleInterval",value:function(e){this.setState({interval:e})}},{key:"handleHourFilter",value:function(e){this.setState({hourFilter:e})}},{key:"handleSymbol",value:function(e){this.setState({currency:e})}},{key:"render",value:function(){var e=this;return Object(w.jsx)(G.Provider,{value:{movingAverageFilters:this.state.movingAverageFilters,setMovingAverageFilter:function(t,a){var n=Object.assign({},e.state.movingAverageFilters);n[t]=a,e.setState({movingAverageFilters:n})},numOfPrevDataPointsMacdLine1:this.state.numOfPrevDataPointsMacdLine1,setNumOfPrevDataPointsMacdLine1:function(t){e.setState({numOfPrevDataPointsMacdLine1:t})},numOfPrevDataPointsMacdLine2:this.state.numOfPrevDataPointsMacdLine2,setNumOfPrevDataPointsMacdLine2:function(t){e.setState({numOfPrevDataPointsMacdLine2:t})},numOfPrevDataPointsMacdSignal:this.state.numOfPrevDataPointsMacdSignal,setNumOfPrevDataPointsMacdSignal:function(t){e.setState({numOfPrevDataPointsMacdSignal:t})},numOfPrevDataPointsRSI:this.state.numOfPrevDataPointsRSI,setNumOfPrevDataPointsRSI:function(t){e.setState({numOfPrevDataPointsRSI:t})},numOfPrevDataPointsStochasticOscillator:this.state.numOfPrevDataPointsStochasticOscillator,setNumOfPrevDataPointsnumOfPrevDataPointsStochasticOscillator:function(t){e.setState({numOfPrevDataPointsStochasticOscillator:t})},enabledFilters:this.state.enabledFilters,toggleMovingAverage:function(t){var a=e.state.enabledFilters.movingAverage.slice();a[t]=!a[t];var n=Object(c.a)(Object(c.a)({},e.state.enabledFilters),{},{movingAverage:a});e.setState({enabledFilters:n})},toggleMacd:function(){var t=Object(c.a)(Object(c.a)({},e.state.enabledFilters),{},{macd:!e.state.enabledFilters.macd});e.setState({enabledFilters:t})},toggleRSI:function(){var t=Object(c.a)(Object(c.a)({},e.state.enabledFilters),{},{rsi:!e.state.enabledFilters.rsi});e.setState({enabledFilters:t})},toggleStochasticOscillator:function(){var t=Object(c.a)(Object(c.a)({},e.state.enabledFilters),{},{stochasticOscillator:!e.state.enabledFilters.stochasticOscillator});e.setState({enabledFilters:t})},chartData:this.state.chartData,currencyHistoryDataForTable:this.state.currencyHistoryDataForTable},children:Object(w.jsx)("div",{className:"ui padded grid",children:Object(w.jsx)("div",{className:"one column row",children:Object(w.jsxs)("div",{className:"column",children:[Object(w.jsx)(v.a,{children:Object(w.jsxs)(f.a,{children:[Object(w.jsxs)(f.a.Title,{active:this.state.isStatisticsAccordionOpen,index:0,onClick:function(){return e.setState({isStatisticsAccordionOpen:!e.state.isStatisticsAccordionOpen})},children:[Object(w.jsx)(p.a,{name:"dropdown"}),"Latest Information"]}),Object(w.jsxs)(f.a.Content,{active:this.state.isStatisticsAccordionOpen,children:[Object(w.jsx)(g.a,{size:"mini",icon:!0,color:"green",onClick:function(){return e.fetchLatestInfo()},children:Object(w.jsx)(p.a,{name:"refresh"})}),Object(w.jsx)("br",{}),Object(w.jsxs)(y.a,{children:[Object(w.jsx)(p.a,{name:"clock outline"}),"Latest Record Date-Time:",Object(w.jsx)(y.a.Detail,{children:this.state.latestInformation.isQueryRunning?"Please wait, loading...":this.state.latestInformation.latestCurrencyDateLocalStr})]}),Object(w.jsx)("br",{}),Object(w.jsxs)(y.a,{children:[Object(w.jsx)(p.a,{name:"clock outline"}),"First Record Date-Time:",Object(w.jsx)(y.a.Detail,{children:this.state.latestInformation.isQueryRunning?"Please wait, loading...":this.state.latestInformation.firstCurrencyDateLocalStr})]}),Object(w.jsx)("br",{}),Object(w.jsxs)(y.a,{children:[Object(w.jsx)(p.a,{name:"hashtag"}),"Number of Records:",Object(w.jsxs)(y.a.Detail,{children:["~",this.state.latestInformation.isQueryRunning?"Please wait, loading...":this.state.latestInformation.totalNumberOfRecords]})]}),Object(w.jsxs)(y.a,{children:[Object(w.jsx)(p.a,{name:"hashtag"}),"Number of Buckets:",Object(w.jsx)(y.a.Detail,{children:this.state.latestInformation.isQueryRunning?"Please wait, loading...":this.state.latestInformation.totalNumberOfBuckets})]})]})]})}),Object(w.jsx)(v.a,{children:Object(w.jsxs)(C.a,{children:[Object(w.jsx)(T,{user:this.props.user,symbolHandler:function(t){return e.handleSymbol(t)}}),Object(w.jsx)(_,{sendController:function(t){return e.handleHourFilter(t)}}),Object(w.jsx)(q,{sendController:function(t){return e.handleInterval(t)}}),Object(w.jsx)(ce,{name:"Moving average 1",number:0}),Object(w.jsx)(ce,{name:"Moving average 2",number:1}),Object(w.jsx)(ce,{name:"Exponential Moving average 1",number:2}),Object(w.jsx)(ce,{name:"Exponential Moving average 2",number:3}),Object(w.jsx)(oe,{name:"MACD Filter"}),Object(w.jsx)(ue,{name:"RSI Filter"}),Object(w.jsx)(je,{name:"Stochastic Oscillator Filter"}),Object(w.jsxs)(g.a,{icon:!0,labelPosition:"right",disabled:""===this.state.currency,color:"green",onClick:function(){return e.fetchAndRender("CHART")},children:[Object(w.jsx)(p.a,{name:"chart line"}),"Show Charts"]}),Object(w.jsxs)(g.a,{icon:!0,labelPosition:"right",disabled:""===this.state.currency,color:"green",onClick:function(){return e.fetchAndRender("TABLE")},children:[Object(w.jsx)(p.a,{name:"numbered list"}),"Show Data"]})]})}),this.state.renderTable||this.state.renderChart?Object(w.jsxs)(v.a,{children:[Object(w.jsx)(S.a,{active:this.state.queryIsRunning,children:Object(w.jsx)(D.a,{size:"big",indeterminate:!0,active:this.state.queryIsRunning,children:"Loading ..."})}),this.state.renderTable?Object(w.jsx)(B,{}):null,this.state.renderChart?Object(w.jsx)(ee,{}):null]}):null,Object(w.jsxs)(v.a,{children:[Object(w.jsx)(S.a,{active:this.state.queryIsRunning,children:Object(w.jsx)(D.a,{size:"big",indeterminate:!0,active:this.state.queryIsRunning,children:"Loading ..."})}),Object(w.jsx)(ne,{query:this.state.query})]})]})})})})}}]),a}(s.a.Component),Oe=a(1096),xe=a(1098),me=a(1097),ve=a(1095),fe=a(306),pe=a.n(fe),ge=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={statsData:n.props.statisticsData},n}return Object(O.a)(a,[{key:"render",value:function(){var e=this.props.statisticsData;return Object(w.jsxs)(U.a,{celled:!0,striped:!0,children:[Object(w.jsx)(U.a.Header,{children:Object(w.jsxs)(U.a.Row,{children:[Object(w.jsx)(U.a.HeaderCell,{children:"Time"}),Object(w.jsx)(U.a.HeaderCell,{children:"Symbol"}),Object(w.jsx)(U.a.HeaderCell,{children:"Last Price"}),Object(w.jsx)(U.a.HeaderCell,{children:"Method"}),Object(w.jsx)(U.a.HeaderCell,{children:"Value of the Method"}),Object(w.jsx)(U.a.HeaderCell,{children:"Threshold"}),Object(w.jsx)(U.a.HeaderCell,{children:"Conditions MET"})]})}),Object(w.jsx)(U.a.Body,{children:void 0!==e?e.map((function(e,t){return Object(w.jsxs)(U.a.Row,{children:[Object(w.jsx)(U.a.Cell,{children:V()(e.time).local().format()}),Object(w.jsx)(U.a.Cell,{children:e.symbol}),Object(w.jsx)(U.a.Cell,{children:e.lastPrice}),Object(w.jsx)(U.a.Cell,{children:e.method}),Object(w.jsx)(U.a.Cell,{children:e.methodValue}),Object(w.jsx)(U.a.Cell,{children:e.threshold}),Object(w.jsx)(U.a.Cell,{children:e.conditionsMet?"true":"false"})]},t)})):null})]})}}]),a}(s.a.Component),ye=h.b.ObjectId,Ce=[{key:1,text:"Moving Average",value:"MA"},{key:2,text:"Exponential Moving Average",value:"EMA"},{key:3,text:"Relative Strength Index",value:"RSI"}],Se=[{key:1,text:"Greater Than",value:"$gt"},{key:2,text:"Lesser Than",value:"$lt"}],De=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).handleTabChange=function(e,t){var a=t.activeIndex;n.setState({activeTab:a}),1===a&&(n.fetchRules(),n.setState({isStatisticsLoaded:!1}))},n.state={interval:1,method:"MA",comparison:"$gt",activeTab:0,ruleName:"",recentNumberOfDataPointsToAnalyze:5,threshold:10,isAddRuleSuccessful:null,rules:[],isRuleDeleteVerificationOpen:!1,executionFrequency:5,isStatisticQueryRunning:!1,isStatisticsLoaded:!1,statisticsData:[],symbol:""},n}return Object(O.a)(a,[{key:"fetchRules",value:function(){var e=this;this.setState({queryIsRunning:!0}),this.props.user.mongoClient("mongodb-atlas").db("exchange").collection("rules").find({}).then((function(t){e.setState({rules:t}),e.setState({queryIsRunning:!1})}))}},{key:"handleInterval",value:function(e){this.setState({interval:e})}},{key:"handleHourFilter",value:function(e){this.setState({hourFilter:e})}},{key:"handleSymbol",value:function(e){this.setState({currency:e}),console.log("SELECTED CURRENCY:"+e)}},{key:"handleMethod",value:function(e){this.setState({method:e})}},{key:"handleComparison",value:function(e){this.setState({comparison:e})}},{key:"saveRule",value:function(){var e=this,t={ruleName:this.state.ruleName,interval:this.state.interval,symbol:this.state.currency,method:this.state.method,numOfDataPointsToAnalyze:parseInt(this.state.recentNumberOfDataPointsToAnalyze),threshold:parseInt(this.state.threshold),comparison:this.state.comparison,createdAt:new Date};this.setState({queryIsRunning:!0}),this.props.user.mongoClient("mongodb-atlas").db("exchange").collection("rules").insertOne(t).then((function(t){e.setState({queryIsRunning:!1}),""!==t.insertedId?e.setState({isAddRuleSuccessful:!0,addRuleMessage:t.insertedId,addRuleMessageHeader:"Rule has been added successfully."}):e.setState({isAddRuleSuccessful:!1,addRuleMessage:"ERROR",addRuleMessageHeader:"Rule has not been added."})}))}},{key:"removeRuleStatistics",value:function(e){var t=this;this.setState({queryIsRunning:!0}),this.props.user.mongoClient("mongodb-atlas").db("exchange").collection("ruleStatistics").deleteOne({_id:ye(e)}).then((function(e){t.setState({queryIsRunning:!1})}))}},{key:"removeRule",value:function(e){var t=this;this.props.user.mongoClient("mongodb-atlas").db("exchange").collection("rules").deleteOne({_id:ye(e)}).then((function(a){if(1===a.deletedCount){var n=t.state.rules.slice();n=n.filter((function(t){return t._id!==e})),t.setState({rules:n,isStatisticsLoaded:!1}),t.removeRuleStatistics(e)}}))}},{key:"fetchStatisticsForARule",value:function(e){var t=this;this.setState({isStatisticQueryRunning:!0,isStatisticsLoaded:!1}),this.props.user.mongoClient("mongodb-atlas").db("exchange").collection("ruleStatistics").find({ruleId:ye(e)}).then((function(e){t.setState({statisticsData:e,isStatisticsLoaded:!0,isStatisticQueryRunning:!1})}))}},{key:"handleRuleNameChange",value:function(e){this.setState({ruleName:e})}},{key:"render",value:function(){var e=this;return Object(w.jsx)(Oe.a,{fluid:!0,children:Object(w.jsx)(xe.a,{activeIndex:this.state.activeTab,onTabChange:this.handleTabChange,panes:[{menuItem:"Rule Add",render:function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(v.a,{children:Object(w.jsxs)(C.a,{children:[Object(w.jsxs)(C.a.Field,{required:!0,children:[Object(w.jsx)("label",{children:"Rule Name"}),Object(w.jsx)(ie.a,{placeholder:"Give a name to rule to identify rule later",value:e.state.ruleName,onChange:function(t,a){return e.handleRuleNameChange(a.value)}})]}),Object(w.jsx)(T,{user:e.props.user,symbolHandler:function(t){return e.handleSymbol(t)}}),Object(w.jsx)(q,{sendController:function(t){return e.handleInterval(t)}}),Object(w.jsxs)(C.a.Group,{widths:12,children:[Object(w.jsxs)(C.a.Field,{required:!0,width:3,children:[Object(w.jsx)("label",{children:"Analyze the recent"}),Object(w.jsx)(pe.a,{stepAmount:1,minValue:1,maxValue:120,value:e.state.recentNumberOfDataPointsToAnalyze,onChange:function(t){return e.setState({recentNumberOfDataPointsToAnalyze:t})}})]}),Object(w.jsxs)(C.a.Field,{width:2,children:[Object(w.jsx)("label",{children:"\xa0"}),Object(w.jsxs)("p",{children:[" ",Object(w.jsx)("br",{})," # of data points "]})]}),Object(w.jsxs)(C.a.Field,{required:!0,width:6,children:[Object(w.jsx)("label",{children:"Apply the Method"}),Object(w.jsx)(H.a,{placeholder:"Compact",compact:!0,selection:!0,value:e.state.method,onChange:function(t,a){return e.handleMethod(a.value)},options:Ce})]})]}),Object(w.jsx)(me.a,{}),Object(w.jsxs)(C.a.Group,{widths:12,children:[Object(w.jsxs)(C.a.Field,{width:3,children:[Object(w.jsxs)("label",{children:["If ",e.state.method," is"]}),Object(w.jsx)(H.a,{compact:!0,selection:!0,value:e.state.comparison,onChange:function(t,a){return e.handleComparison(a.value)},options:Se})]}),Object(w.jsxs)(C.a.Field,{width:3,children:[Object(w.jsx)("label",{children:"\xa0"}),Object(w.jsx)(pe.a,{valueType:"decimal",stepAmount:1,minValue:0,maxValue:1e5,precision:4,value:e.state.threshold,onChange:function(t){return e.setState({threshold:t})}})]})]}),Object(w.jsx)(g.a,{disabled:e.state.queryIsRunning,color:"green",onClick:function(){return e.saveRule()},children:"Add Rule"})]})}),Object(w.jsxs)(v.a,{hidden:null==e.state.isAddRuleSuccessful,children:[Object(w.jsx)(S.a,{active:e.state.queryIsRunning,children:Object(w.jsx)(D.a,{size:"big",indeterminate:!0,active:e.state.queryIsRunning,children:"Rule is being added ..."})}),Object(w.jsx)(ve.a,{success:e.state.isAddRuleSuccessful,negative:!e.state.isAddRuleSuccessful,hidden:null==e.state.isAddRuleSuccessful,header:e.state.addRuleMessageHeader,content:e.state.addRuleMessage})]})]})}},{menuItem:"List Rules",render:function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(v.a,{children:[Object(w.jsx)(S.a,{active:e.state.queryIsRunning,children:Object(w.jsx)(D.a,{size:"big",indeterminate:!0,active:e.state.queryIsRunning,children:"Loading data ..."})}),Object(w.jsxs)(U.a,{celled:!0,striped:!0,children:[Object(w.jsx)(U.a.Header,{children:Object(w.jsxs)(U.a.Row,{children:[Object(w.jsx)(U.a.HeaderCell,{children:"Rule Name"}),Object(w.jsx)(U.a.HeaderCell,{children:"Symbol"}),Object(w.jsx)(U.a.HeaderCell,{children:"Added Time"}),Object(w.jsx)(U.a.HeaderCell,{children:"Interval"}),Object(w.jsx)(U.a.HeaderCell,{children:"Method"}),Object(w.jsx)(U.a.HeaderCell,{children:"Comparison"}),Object(w.jsx)(U.a.HeaderCell,{children:"Threshold"}),Object(w.jsx)(U.a.HeaderCell,{children:"# of Data Points"}),Object(w.jsx)(U.a.HeaderCell,{children:"Statistics"}),Object(w.jsx)(U.a.HeaderCell,{children:"Remove Rule"})]})}),Object(w.jsx)(U.a.Body,{children:void 0!==e.state.rules?e.state.rules.map((function(t,a){return Object(w.jsxs)(U.a.Row,{children:[Object(w.jsx)(U.a.Cell,{children:t.ruleName}),Object(w.jsx)(U.a.Cell,{children:t.symbol}),Object(w.jsx)(U.a.Cell,{children:V()(t.createdAt).local().format()}),Object(w.jsx)(U.a.Cell,{children:t.interval}),Object(w.jsx)(U.a.Cell,{children:t.method}),Object(w.jsx)(U.a.Cell,{children:t.comparison}),Object(w.jsx)(U.a.Cell,{children:t.threshold}),Object(w.jsx)(U.a.Cell,{children:t.numOfDataPointsToAnalyze}),Object(w.jsx)(U.a.Cell,{children:Object(w.jsx)(g.a,{onClick:function(){return e.fetchStatisticsForARule(t._id)},circular:!0,icon:"list"})}),Object(w.jsx)(U.a.Cell,{children:Object(w.jsx)(g.a,{onClick:function(){return e.setState({isRuleDeleteVerificationOpen:!0,chosenRuleId:t._id,chosenRuleName:t.ruleName})},circular:!0,icon:"remove circle"})})]},a)})):null})]}),Object(w.jsxs)(F.a,{size:"tiny",open:e.state.isRuleDeleteVerificationOpen,onClose:function(){return e.setState({isRuleDeleteVerificationOpen:!1})},children:[Object(w.jsx)(F.a.Header,{children:"Rule ".concat(e.state.chosenRuleName)}),Object(w.jsx)(F.a.Content,{children:Object(w.jsx)("p",{children:"Are you sure you want to delete this rule?"})}),Object(w.jsxs)(F.a.Actions,{children:[Object(w.jsx)(g.a,{negative:!0,onClick:function(){return e.setState({isRuleDeleteVerificationOpen:!1})},children:"No"}),Object(w.jsx)(g.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Yes",onClick:function(){e.removeRule(e.state.chosenRuleId),e.setState({isRuleDeleteVerificationOpen:!1})}})]})]})]}),Object(w.jsxs)(v.a,{hidden:!e.state.isStatisticsLoaded&&!e.state.isStatisticQueryRunning,children:[Object(w.jsx)(S.a,{active:e.state.isStatisticQueryRunning,children:Object(w.jsx)(D.a,{size:"big",indeterminate:!0,active:e.state.isStatisticQueryRunning,children:"Loading statistics ..."})}),e.state.isStatisticsLoaded?Object(w.jsx)(ge,{statisticsData:e.state.statisticsData}):null]})]})}}]})})}}]),a}(s.a.Component),Pe=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={isQueryRunning:!1,localLastPricesData:void 0,isPriceDataRetrieved:!1},n}return Object(O.a)(a,[{key:"fetchLastPrices",value:function(){var e=this;this.setState({isQueryRunning:!0,localLastPricesData:void 0}),this.props.user.functions.GetLastPrices().then((function(t){var a=t;e.setState({isQueryRunning:!1,localLastPricesData:a,filteredLastPricesData:a,isAccordionOpen:!1})}))}},{key:"handleFilterInput",value:function(e){var t=this.state.localLastPricesData.filter((function(t){return t.symbol.includes(e)}));this.setState({filteredLastPricesData:t})}},{key:"UNSAFE_componentWillMount",value:function(){this.fetchLastPrices()}},{key:"render",value:function(){var e=this,t=JSON.stringify({symbol:1,time:-1},null,4),a=JSON.stringify([{$sort:{symbol:1,time:-1}},{$group:{_id:"$symbol",lastPrice:{$first:"$price"},lastUpdatedTime:{$first:"$time"}}},{$project:{symbol:"$_id",lastPrice:1,lastUpdatedTime:1}},{$sort:{symbol:1}}],null,4);return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(v.a,{children:Object(w.jsxs)(f.a,{children:[Object(w.jsxs)(f.a.Title,{active:this.state.isAccordionOpen,index:0,onClick:function(){return e.setState({isAccordionOpen:!e.state.isAccordionOpen})},children:[Object(w.jsx)(p.a,{name:"dropdown"}),"How does it work"]}),Object(w.jsxs)(f.a.Content,{active:this.state.isAccordionOpen,children:[Object(w.jsx)("p",{children:"In order to bring the first or the last value of a metadata (symbol) efficiently, query engine uses underlying index on the Time-Series collection and mitigate potential unnecessary record scans."}),Object(w.jsx)("p",{children:"Following index created on the Time-Series collection:"}),Object(w.jsx)(te.a,{showLineNumbers:!0,language:"json",style:ae.a,children:t}),Object(w.jsx)("p",{children:"$sort stage is the first aggregation stage to utilize index and we use $first operator in the $group stage to retrieve the first record on the index that is sorted by time, DESCENDING."}),Object(w.jsx)(te.a,{showLineNumbers:!0,language:"json",style:ae.a,children:a}),Object(w.jsxs)("p",{children:["In the execution plan we see ",Object(w.jsx)("b",{children:"DISTINCT_SCAN"})," step that eliminates unneeded records scan. Therefore it takes a few seconds (depending on the # of distinct metadata) to retrieve the first/last record among billions of records."]}),Object(w.jsxs)("p",{children:["For futher information, ",Object(w.jsx)("a",{href:"https://www.mongodb.com/docs/manual/core/timeseries/timeseries-secondary-index/#-last-point--queries-on-time-series-collections",target:"_blank",children:"click here"})," to see documentation."]})]})]})}),Object(w.jsx)(v.a,{children:Object(w.jsxs)(g.a,{icon:!0,labelPosition:"right",disabled:this.state.isQueryRunning,color:"green",onClick:function(){return e.fetchLastPrices()},children:[Object(w.jsx)(p.a,{name:"refresh"}),"Refresh the Prices"]})}),Object(w.jsxs)(v.a,{children:[Object(w.jsx)(S.a,{active:this.state.isQueryRunning,children:Object(w.jsx)(D.a,{size:"small",indeterminate:!0,active:this.state.isQueryRunning,children:"Loading ..."})}),Object(w.jsx)(ie.a,{icon:"search",placeholder:"Search...",onChange:function(t,a){return e.handleFilterInput(a.value)}}),Object(w.jsxs)(U.a,{celled:!0,striped:!0,children:[Object(w.jsx)(U.a.Header,{children:Object(w.jsxs)(U.a.Row,{children:[Object(w.jsx)(U.a.HeaderCell,{children:"Symbol"}),Object(w.jsx)(U.a.HeaderCell,{children:"Last Price"}),Object(w.jsx)(U.a.HeaderCell,{children:"Updated Time"})]})}),void 0!==this.state.localLastPricesData?Object(w.jsx)(U.a.Body,{children:void 0!==this.state.filteredLastPricesData?this.state.filteredLastPricesData.map((function(e,t){return Object(w.jsxs)(U.a.Row,{children:[Object(w.jsx)(U.a.Cell,{children:e.symbol}),Object(w.jsx)(U.a.Cell,{children:e.lastPrice}),Object(w.jsx)(U.a.Cell,{children:V()(e.lastUpdatedTime).local().format()})]},t)})):null}):Object(w.jsx)(U.a.Body,{})]})]})]})}}]),a}(s.a.Component),Re=a(396),Ae={width:"100px"},ke={width:"50px"},Fe=function(e){Object(x.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).handleItemClick=function(e,t){var a=t.name;return n.setState({activeItem:a})},n.state={activeItem:"home"},n}return Object(O.a)(a,[{key:"render",value:function(){var e=this.state.activeItem;return Object(w.jsxs)(Re.a,{size:"small",children:[Object(w.jsx)(Re.a.Item,{name:"Currency Analysis",active:"currency"===e,href:"/currency"}),Object(w.jsx)(Re.a.Item,{name:"Rules",active:"rules"===e,href:"/rules"}),Object(w.jsx)(H.a,{item:!0,text:"Reports",children:Object(w.jsx)(H.a.Menu,{children:Object(w.jsx)(H.a.Item,{href:"/reportLastPrices",children:"Last Prices"})})}),Object(w.jsxs)(Re.a.Menu,{position:"right",children:[Object(w.jsx)(Re.a.Item,{children:Object(w.jsx)("a",{className:"item",href:"https://cloud.mongodb.com",target:"_blank",rel:"noreferrer",children:Object(w.jsx)("img",{alt:"",src:"/mdblogo.svg",style:Ae})})}),Object(w.jsx)(Re.a.Item,{children:Object(w.jsx)("a",{className:"item",href:"https://docs.mongodb.com/manual/core/timeseries-collections/",target:"_blank",rel:"noreferrer",children:Object(w.jsx)("img",{alt:"",src:"/ts.avif",style:ke})})})]})]})}}]),a}(s.a.Component),Le=new h.a({id:"".concat(window.getConfig.REALM_APP_ID)});function Ie(e){var t=e.setUser,a=function(){var e=Object(o.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.logIn(h.c.anonymous());case 2:a=e.sent,t(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a(),Object(w.jsx)("div",{children:"Logging in..."})}var we=function(){var e=s.a.useState(Le.currentUser),t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(w.jsx)("div",{children:a?Object(w.jsxs)(Oe.a,{children:[Object(w.jsx)(Fe,{user:a}),Object(w.jsxs)(j.d,{children:[" ",Object(w.jsx)(j.b,{exact:!0,path:"/",children:Object(w.jsx)(j.a,{to:"/currency"})}),Object(w.jsx)(j.b,{exact:!0,path:"/currency",render:function(e){return Object(w.jsx)(be,Object(c.a)({user:a},e))}}),Object(w.jsx)(j.b,{exact:!0,path:"/rules",render:function(e){return Object(w.jsx)(De,Object(c.a)({user:a},e))}}),Object(w.jsx)(j.b,{exact:!0,path:"/reportLastPrices",render:function(e){return Object(w.jsx)(Pe,Object(c.a)({user:a},e))}})]}),Object(w.jsxs)("div",{style:{display:"none"},children:["User id: ",a.id]})]}):Object(w.jsx)(Ie,{setUser:n})})},Me=a(300);r.a.render(Object(w.jsxs)(Me.a,{children:[Object(w.jsx)(we,{})," "]}),document.getElementById("root"))},427:function(e,t){},429:function(e,t){},441:function(e,t){},443:function(e,t){},470:function(e,t){},472:function(e,t){},473:function(e,t){},478:function(e,t){},480:function(e,t){},486:function(e,t){},488:function(e,t){},507:function(e,t){},519:function(e,t){},522:function(e,t){}},[[1038,1,2]]]);
//# sourceMappingURL=main.b0291b9d.chunk.js.map